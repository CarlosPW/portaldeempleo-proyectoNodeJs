(this["webpackJsonpfrontend-portalempleo"]=this["webpackJsonpfrontend-portalempleo"]||[]).push([[0],{124:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),i=n.n(c),s=n(25),o=n(12),l=n(13),j=n(170),u=n(44),b=n(196),d=n(195),O=n(174),m=n(14),x=n(26),p=n.n(x),h=n(48),f="https://nodeproyectofinal.herokuapp.com",g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(f,"/").concat(e);return"GET"===n?fetch(a):fetch(a,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(f,"/").concat(e),r=localStorage.getItem("token")||"";return"GET"===n?fetch(a,{method:n,headers:{Authorization:r}}):fetch(a,{method:n,headers:{"Content-type":"application/json",Authorization:r},body:JSON.stringify(t)})},y=function(e,t,n,a,r,c){return function(){var t=Object(h.a)(p.a.mark((function t(i){var s,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,{categorie_name:n,job_title:a,description:r,experience_level:c},"POST");case 2:return s=t.sent,t.next=5,s.json();case 5:(o=t.sent).error&&console.log(o.error),console.log(o);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=n(43),C=n(20),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(l.a)(t,2),r=n[0],c=n[1],i=function(){c(e)},s=function(e){var t=e.target;c(Object(C.a)(Object(C.a)({},r),{},Object(S.a)({},t.name,t.value)))};return[r,s,i]},N=n(2),E=Object(j.a)({fieldSize:{width:250}});var w=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],r=t[1],c=E();Object(a.useEffect)((function(){g("api/categorias").then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]);var i=_({Category:"Back-End",ExperienceLabel:"Senior,"}),s=Object(l.a)(i,2),o=s[0],j=s[1],x=Object(m.b)(),p=Object(m.c)((function(e){return e.auth})),h="api/addpost/".concat(p.uid);return Object(N.jsxs)("div",{children:[Object(N.jsx)(u.a,{align:"center",gutterBottom:!0,variant:"h2",color:"initial",children:"Crear Oferta Laboral"}),Object(N.jsx)(b.a,{display:"flex",justifyContent:"center",textAlign:"center",className:"animate__animated animate__fadeIn animate__faster",children:Object(N.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(o),x(y(h,p.uid,o.Category,o.jobTitleLabel,o.descriptionLabel,o.ExperienceLabel))},children:[Object(N.jsx)(d.a,{className:c.fieldSize,margin:"normal",id:"outlined-basic",label:"T\xedtulo de Oferta",variant:"outlined",name:"jobTitleLabel",onChange:j,required:!0}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),null!==n?Object(N.jsx)(d.a,{className:c.fieldSize,id:"outlined-select-currency-native",select:!0,label:"Categor\xeda",onChange:j,name:"Category",SelectProps:{native:!0},variant:"outlined",required:!0,children:n.items.map((function(e){return Object(N.jsx)("option",{value:e.categorie_name,children:e.categorie_name},e.categorie_name)}))}):null,Object(N.jsx)("br",{}),Object(N.jsx)(d.a,{className:c.fieldSize,margin:"normal",id:"outlined-multiline-static",label:"Descripci\xf3n de la Oferta",variant:"outlined",name:"descriptionLabel",onChange:j,required:!0,multiline:!0,rows:5}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)(d.a,{className:c.fieldSize,id:"outlined-select-currency-native",select:!0,label:"Experiencia",name:"ExperienceLabel",onChange:j,SelectProps:{native:!0},variant:"outlined",required:!0,children:[{value:"Senior",label:"Senior"},{value:"Semi-Senior",label:"Semi-Senior"},{value:"Junior",label:"Junior"}].map((function(e){return Object(N.jsx)("option",{value:e.value,children:e.label},e.value)}))}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)(O.a,{type:"submit",variant:"contained",color:"secondary",children:"crear post"})]})})]})},k=Object(j.a)({fieldSize:{width:250}});var L=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],r=t[1],c=k();Object(a.useEffect)((function(){g("api/categorias").then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]);var i=_({Category:"Back-End",ExperienceLabel:"Senior,"}),s=Object(l.a)(i,2),o=s[0],j=s[1],x=Object(m.b)(),p=Object(m.c)((function(e){return e.auth})),h="api/addrequest/".concat(p.uid);return Object(N.jsxs)("div",{children:[Object(N.jsx)(u.a,{align:"center",gutterBottom:!0,variant:"h2",color:"initial",children:"Crear Solicitud Laboral"}),Object(N.jsx)(b.a,{display:"flex",justifyContent:"center",textAlign:"center",className:"animate__animated animate__fadeIn animate__faster",children:Object(N.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(o),x(y(h,p.uid,o.Category,o.jobTitleLabel,o.descriptionLabel,o.ExperienceLabel))},children:[Object(N.jsx)(d.a,{className:c.fieldSize,margin:"normal",id:"outlined-basic",label:"T\xedtulo de Solicitud",variant:"outlined",name:"jobTitleLabel",onChange:j,required:!0}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),null!==n?Object(N.jsx)(d.a,{className:c.fieldSize,id:"outlined-select-currency-native",select:!0,label:"Categor\xeda",onChange:j,name:"Category",SelectProps:{native:!0},variant:"outlined",required:!0,children:n.items.map((function(e){return Object(N.jsx)("option",{value:e.categorie_name,children:e.categorie_name},e.categorie_name)}))}):null,Object(N.jsx)("br",{}),Object(N.jsx)(d.a,{className:c.fieldSize,margin:"normal",id:"outlined-multiline-static",label:"Descripci\xf3n de la Solicitud",variant:"outlined",name:"descriptionLabel",onChange:j,required:!0,multiline:!0,rows:5}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)(d.a,{className:c.fieldSize,id:"outlined-select-currency-native",select:!0,label:"Experiencia",name:"ExperienceLabel",onChange:j,SelectProps:{native:!0},variant:"outlined",required:!0,children:[{value:"Senior",label:"Senior"},{value:"Semi-Senior",label:"Semi-Senior"},{value:"Junior",label:"Junior"}].map((function(e){return Object(N.jsx)("option",{value:e.value,children:e.label},e.value)}))}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)(O.a,{type:"submit",variant:"contained",color:"secondary",children:"crear solicitud"})]})})]})},I=n(6),T=n(178),q=n(180),A=n(175),P=n(177),D=n(179),R=n(176),G=n(98),U=Object(I.a)((function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}}))(A.a),z=Object(I.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(R.a),B=Object(j.a)({table:{minWidth:700}});function H(e){var t=e.data,n=B();return Object(N.jsx)(P.a,{component:G.a,children:Object(N.jsxs)(T.a,{className:n.table,"aria-label":"customized table",children:[Object(N.jsx)(D.a,{children:Object(N.jsxs)(R.a,{children:[Object(N.jsx)(U,{children:"Nombre"}),Object(N.jsx)(U,{align:"right",children:"Apellido"}),Object(N.jsx)(U,{align:"right",children:"Email"}),Object(N.jsx)(U,{align:"right",children:"Rol"})]})}),Object(N.jsx)(q.a,{children:t.Users.map((function(e,t){return Object(N.jsxs)(z,{children:[Object(N.jsx)(U,{component:"th",scope:"row",children:e.first_name}),Object(N.jsx)(U,{align:"right",children:e.last_name}),Object(N.jsx)(U,{align:"right",children:e.email}),Object(N.jsx)(U,{align:"right",children:e.role})]},t)}))})]})})}var M=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){v("api/usuarios").then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]),Object(N.jsxs)("div",{children:[Object(N.jsx)(u.a,{align:"center",gutterBottom:!0,variant:"h2",color:"initial",children:"Lista de Usuarios"}),null!==n?Object(N.jsx)(b.a,{children:Object(N.jsx)(H,{data:n})}):Object(N.jsx)("h2",{children:"Loading..."})]})},J=n(185),F=n(187),W=n(92),K=n.n(W),X=n(186),V=n(184),Q=n(199),Y=n(201),Z=n(200),$=n(181),ee=n(126),te=n(182),ne=n(183),ae=n(173),re=n(71),ce=n.n(re),ie=n(90),se=n.n(ie),oe=n(91),le=n.n(oe),je=Object(j.a)((function(e){return{toolbar:e.mixins.toolbar,drawerPaper:{width:240}}})),ue=function(){var e=je(),t=Object(m.c)((function(e){return e.auth}));return Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{className:e.toolbar}),Object(N.jsx)($.a,{}),Object(N.jsxs)(ae.a,{children:[Object(N.jsxs)(ee.a,{button:!0,component:s.b,to:"/posts",children:[Object(N.jsx)(te.a,{children:Object(N.jsx)(ce.a,{})}),Object(N.jsx)(ne.a,{primary:"Lista de Ofertas"})]},"PostLists"),Object(N.jsxs)(ee.a,{button:!0,component:s.b,to:"/requests",children:[Object(N.jsx)(te.a,{children:Object(N.jsx)(se.a,{})}),Object(N.jsx)(ne.a,{primary:"Solicitudes"})]},"RequestsLists")]}),Object(N.jsx)($.a,{}),Object(N.jsxs)(ae.a,{children:[Object(N.jsxs)(ee.a,{button:!0,component:s.b,to:"/createpost",children:[Object(N.jsx)(te.a,{children:Object(N.jsx)(ce.a,{})}),Object(N.jsx)(ne.a,{primary:"Crear Oferta"})]},"CreatePost"),Object(N.jsxs)(ee.a,{button:!0,component:s.b,to:"/createrequest",children:[Object(N.jsx)(te.a,{children:Object(N.jsx)(ce.a,{})}),Object(N.jsx)(ne.a,{primary:"Crear Solicitud"})]},"CreateRequest")]}),Object(N.jsx)($.a,{}),"ADMIN_ROLE"===t.role?Object(N.jsx)(ae.a,{children:Object(N.jsxs)(ee.a,{button:!0,component:s.b,to:"/getusers",children:[Object(N.jsx)(te.a,{children:Object(N.jsx)(le.a,{})}),Object(N.jsx)(ne.a,{primary:"Lista de Usuarios"})]},"GetUsers")}):null]})},be=function(e){return{type:"AUTH_LOGIN",payload:e}},de=function(){return{type:"AUTH_LOGOUT"}},Oe=function(e){return{type:"AUTH_ERROR",payload:e}},me=function(e){return{type:"SIGN_MESSAGE",payload:e}},xe=function(e){return{type:"SIGN_ERROR",payload:e}},pe=function(){return{type:"CHECKING_FINISH"}},he=240,fe=Object(j.a)((function(e){return{root:{display:"flex"},menuButton:Object(S.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),title:{flexGrow:1},drawer:Object(S.a)({},e.breakpoints.up("sm"),{width:he,flexShrink:0}),drawerPaper:{width:he},appBar:Object(S.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(he,"px)"),marginLeft:he}),toolbar:e.mixins.toolbar,content:{flexGrow:1,padding:e.spacing(3)}}})),ge=function(e){var t=fe(),n=Object(a.useState)(!1),r=Object(l.a)(n,2),c=r[0],i=r[1],s=Object(m.b)(),o=function(){i(!c)},j=Object(m.c)((function(e){return e.auth}));return Object(N.jsxs)("div",{className:t.root,children:[Object(N.jsx)(V.a,{}),Object(N.jsx)(J.a,{position:"fixed",color:"primary",className:t.appBar,children:Object(N.jsxs)(X.a,{children:[Object(N.jsx)(F.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:o,className:t.menuButton,children:Object(N.jsx)(K.a,{})}),Object(N.jsx)(Q.a,{smDown:!0,children:Object(N.jsx)(u.a,{className:t.title,variant:"h6",children:"Portal de Empleos"})}),Object(N.jsx)(Q.a,{xsDown:!0,children:Object(N.jsx)(u.a,{className:t.title,variant:"h6",children:null!==j.email?j.email:null})}),Object(N.jsx)(Q.a,{smUp:!0,children:Object(N.jsx)(u.a,{className:t.title,variant:"h6",children:null!==j.email?j.email.split("@")[0]:null})}),Object(N.jsx)(Q.a,{xsDown:!0,children:Object(N.jsx)(Y.a,{label:"ADMIN_ROLE"===j.role?"Admin":"User",color:"secondary",size:"small"})}),Object(N.jsx)(O.a,{color:"inherit",onClick:function(){s((function(e){localStorage.clear(),e(de())}))},children:"Logout"})]})}),Object(N.jsxs)("nav",{className:t.drawer,children:[Object(N.jsx)("div",{className:t.toolbar}),Object(N.jsx)(Q.a,{smUp:!0,implementation:"css",children:Object(N.jsx)(Z.a,{variant:"temporary",anchor:"left",open:c,onClose:o,classes:{paper:t.drawerPaper},ModalProps:{keepMounted:!0},children:Object(N.jsx)(ue,{})})}),Object(N.jsx)(Q.a,{xsDown:!0,implementation:"css",children:Object(N.jsx)(Z.a,{classes:{paper:t.drawerPaper},variant:"permanent",open:!0,children:Object(N.jsx)(ue,{})})})]}),Object(N.jsxs)("main",{className:t.content,children:[Object(N.jsx)("div",{className:t.toolbar}),e.children]})]})},ve=n(188),ye=n(189),Se=n(191),Ce=n(202),_e=n(70),Ne=n(69),Ee=n(93),we=n.n(Ee),ke=n(192),Le=n(193),Ie=n(96),Te=n(190),qe=Object(j.a)((function(e){return{root:{maxWidth:345},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:_e.a[500]},pink:{color:e.palette.getContrastText(Ne.a[500]),backgroundColor:Ne.a[500]}}}));function Ae(e){var t=e.description,n=e.createdAt,a=e.jobTitle,c=e.firstName,i=e.lastName,s=e.email,o=e.requirements,j=e.type,b=e.id,d=e.setborrarRefresh,x=Object(m.c)((function(e){return e.auth})),f=qe(),g=r.a.useState(!1),y=Object(l.a)(g,2),S=y[0],C=y[1],_=r.a.useState(null),E=Object(l.a)(_,2),w=E[0],k=E[1],L=Object(m.b)(),I="post"===j?"api/removepost/".concat(b):"api/removerequest/".concat(b),T=function(){k(null),d(b),L(function(e){return function(){var t=Object(h.a)(p.a.mark((function t(n){var a,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,{},"DELETE");case 2:return a=t.sent,t.next=5,a.json();case 5:(r=t.sent).error&&console.log(r.error),console.log(r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(I))};return Object(N.jsxs)(ve.a,{className:f.root,children:[Object(N.jsx)(ye.a,{avatar:Object(N.jsx)(Ce.a,{"aria-label":"recipe",className:f.avatar,children:c[0]}),action:"ADMIN_ROLE"===x.role||x.email===s?Object(N.jsxs)("div",{children:[Object(N.jsx)(F.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){k(e.currentTarget)},children:Object(N.jsx)(we.a,{})}),Object(N.jsx)(Ie.a,{id:"simple-menu",anchorEl:w,keepMounted:!0,open:Boolean(w),onClose:T,children:Object(N.jsx)(Te.a,{onClick:T,children:"Borrar Post"})})]}):null,title:a,subheader:n}),Object(N.jsxs)(Se.a,{children:[Object(N.jsx)(u.a,{variant:"body1",color:"textPrimary",component:"p",children:t}),Object(N.jsx)("br",{}),Object(N.jsx)(u.a,{variant:"body1",color:"textPrimary",component:"p",children:o})]}),Object(N.jsx)(ke.a,{disableSpacing:!0,children:Object(N.jsx)(O.a,{variant:"contained",color:"secondary",onClick:function(){C(!S)},"aria-expanded":S,children:"M\xe1s Info"})}),Object(N.jsxs)(Le.a,{in:S,timeout:"auto",unmountOnExit:!0,children:[Object(N.jsx)($.a,{}),Object(N.jsxs)(Se.a,{children:[Object(N.jsx)(u.a,{paragraph:!0,children:"Creado por: ".concat(c," ").concat(i)}),Object(N.jsx)(u.a,{paragraph:!0,children:"Email: ".concat(s)})]})]})]})}var Pe=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(),i=Object(l.a)(c,2),s=i[0],o=i[1];return Object(a.useEffect)((function(){v("api/posts/").then((function(e){return e.json()})).then((function(e){return r(e)}))}),[s]),Object(N.jsxs)("div",{children:[Object(N.jsx)(u.a,{align:"center",gutterBottom:!0,variant:"h2",color:"initial",children:"Lista de Ofertas"}),Object(N.jsx)(b.a,{display:"flex",justifyContent:"center",flexWrap:"wrap",children:null!==n?n.items.reverse().map((function(e,t){return Object(N.jsx)(b.a,{m:3,className:"animate__animated animate__fadeIn animate__faster",children:Object(N.jsx)(Ae,{setborrarRefresh:o,type:"post",id:e._id,description:e.description,createdAt:e.created_at.split("T")[0],jobTitle:e.job_title,firstName:e.user.first_name,lastName:e.user.last_name,email:e.user.email,requirements:e.requirements.join(", ")})},t)})):Object(N.jsx)("h3",{children:"Loading..."})})]})},De=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(),i=Object(l.a)(c,2),s=i[0],o=i[1];return Object(a.useEffect)((function(){v("api/requests").then((function(e){return e.json()})).then((function(e){return r(e)}))}),[s]),Object(N.jsxs)("div",{children:[Object(N.jsx)(u.a,{align:"center",gutterBottom:!0,variant:"h2",color:"initial",children:"Solicitudes de Trabajo"}),Object(N.jsx)(b.a,{display:"flex",justifyContent:"center",flexWrap:"wrap",children:null!==n?n.items.reverse().map((function(e,t){return Object(N.jsx)(b.a,{m:3,className:"animate__animated animate__fadeIn animate__faster",children:Object(N.jsx)(Ae,{setborrarRefresh:o,id:e._id,type:"request",description:e.description,createdAt:e.created_at.split("T")[0],jobTitle:e.job_title,firstName:e.user.first_name,lastName:e.user.last_name,email:e.user.email})},t)})):Object(N.jsx)("h3",{children:"Loading..."})})]})},Re=function(){return Object(N.jsx)(s.a,{children:Object(N.jsx)(ge,{children:Object(N.jsxs)(o.d,{children:[Object(N.jsx)(o.b,{exact:!0,path:"/posts",children:Object(N.jsx)(Pe,{})}),Object(N.jsx)(o.b,{exact:!0,path:"/requests",children:Object(N.jsx)(De,{})}),Object(N.jsx)(o.b,{exact:!0,path:"/createpost",children:Object(N.jsx)(w,{})}),Object(N.jsx)(o.b,{exact:!0,path:"/createrequest",children:Object(N.jsx)(L,{})}),Object(N.jsx)(o.b,{exact:!0,path:"/getusers",children:Object(N.jsx)(M,{})}),Object(N.jsx)(o.a,{to:"/posts"})]})})})},Ge=function(){return Object(N.jsx)("div",{children:Object(N.jsx)(Re,{})})},Ue=n(194),ze=n.p+"static/media/login_image.f50df7af.svg",Be=n(197),He=Object(j.a)({PaperClass:{width:300,height:550,display:"flex"},iconClass:{padding:15,width:180},formClass:{display:"flex",flexDirection:"column",alignItems:"center"}}),Me=function(){var e=_(),t=Object(l.a)(e,2),n=t[0],r=t[1],c=He(),i=Object(m.b)(),s=Object(m.c)((function(e){return e.auth})),j=Object(o.g)();return Object(a.useEffect)((function(){}),[s]),Object(N.jsx)(b.a,{p:0,className:c.boxContainerClass,bgcolor:"primary.main",style:{height:"100vh"},justifyContent:"center",alignItems:"center",display:"flex",children:Object(N.jsx)(G.a,{elevation:3,className:c.PaperClass,children:Object(N.jsxs)(Ue.a,{container:!0,direction:"column",justify:"space-evenly",alignItems:"center",children:[Object(N.jsxs)(b.a,{justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"column",children:[Object(N.jsx)("img",{className:c.iconClass,src:ze,alt:"login screen"}),Object(N.jsx)(O.a,{variant:"contained",color:"primary",onClick:function(){j.push("/signup")},children:"Crear una cuenta"})]}),Object(N.jsx)($.a,{}),Object(N.jsxs)(b.a,{justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"column",children:[Object(N.jsx)(u.a,{variant:"h5",children:"Login"}),Object(N.jsxs)("form",{className:c.formClass,onSubmit:function(e){var t,a;e.preventDefault(),console.log(n),i((t=n.lEmail,a=n.lPassword,function(){var e=Object(h.a)(p.a.mark((function e(n){var r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("api/usuarios/login",{email:t,password:a},"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:(c=e.sent).message&&n(Oe(c.message)),c.token&&(localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),n(be({uid:c.usuario.usuarioID,email:c.usuario.email,role:c.usuario.role})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(N.jsx)(d.a,{margin:"normal",id:"outlined-basic",label:"Email",type:"Email",variant:"outlined",name:"lEmail",onChange:r,required:!0}),Object(N.jsx)(d.a,{margin:"normal",id:"outlined-basic",label:"Password",variant:"outlined",name:"lPassword",onChange:r,required:!0}),Object(N.jsx)("br",{}),null!==s.message?Object(N.jsx)(Be.a,{severity:"error",children:s.message}):null,Object(N.jsx)("br",{}),Object(N.jsx)(O.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})]})})})},Je=Object(j.a)({paperContainer_signup:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:300,height:650},formClass:{display:"flex",flexDirection:"column",alignItems:"center"}}),Fe=function(){var e=_(),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(m.b)(),c=Object(m.c)((function(e){return e.auth})),i=Je(),s=Object(o.g)();return Object(N.jsx)(b.a,{style:{height:"100vh"},bgcolor:"primary.main",justifyContent:"center",alignItems:"center",display:"flex",children:Object(N.jsxs)(G.a,{className:i.paperContainer_signup,children:[Object(N.jsx)(O.a,{variant:"contained",color:"secondary",onClick:function(){r(de()),s.push("/login")},children:"Go back"}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),Object(N.jsx)(u.a,{id:"transition-modal-title",variant:"h5",children:"Sign up"}),Object(N.jsxs)("form",{className:i.formClass,onSubmit:function(e){var t,a,c,i;e.preventDefault(),r((t=n.sFirstName,a=n.sLastName,c=n.sEmail,i=n.sPassword,function(){var e=Object(h.a)(p.a.mark((function e(n){var r,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("api/usuarios/signup",{email:c,password:i,last_name:a,first_name:t},"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(s=e.sent).errors){e.next=9;break}return n(xe(s.errors)),e.abrupt("return");case 9:n(me(s));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(N.jsx)(d.a,{margin:"normal",id:"outlined-basic",label:"First Name",variant:"outlined",name:"sFirstName",onChange:a,required:!0}),Object(N.jsx)(d.a,{margin:"normal",id:"outlined-basic",label:"Last Name",variant:"outlined",name:"sLastName",onChange:a,required:!0}),Object(N.jsx)(d.a,{margin:"normal",id:"outlined-basic",label:"Email",variant:"outlined",name:"sEmail",onChange:a,type:"Email",required:!0}),Object(N.jsx)(d.a,{margin:"normal",id:"outlined-basic",label:"Password",variant:"outlined",name:"sPassword",onChange:a,required:!0}),Object(N.jsx)("br",{}),null!==c.error?c.error.map((function(e,t){return Object(N.jsx)(Be.a,{severity:"error",children:e.msg},t)})):null,null!==c.message?Object(N.jsx)(Be.a,{severity:"success",children:"Cuenta Creada!"}):null,Object(N.jsx)("br",{}),Object(N.jsx)(O.a,{type:"submit",variant:"contained",color:"primary",children:"Crear cuenta"})]})]})})},We=n(68),Ke=function(e){var t=e.isAuthenticated,n=e.component,a=Object(We.a)(e,["isAuthenticated","component"]);return Object(N.jsx)(o.b,Object(C.a)(Object(C.a)({},a),{},{component:function(e){return t?Object(N.jsx)(n,Object(C.a)({},e)):Object(N.jsx)(o.a,{to:"/login"})}}))},Xe=function(e){var t=e.isAuthenticated,n=e.component,a=Object(We.a)(e,["isAuthenticated","component"]);return Object(N.jsx)(o.b,Object(C.a)(Object(C.a)({},a),{},{component:function(e){return t?Object(N.jsx)(o.a,{to:"/"}):Object(N.jsx)(n,Object(C.a)({},e))}}))};function Ve(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.auth}));return Object(a.useEffect)((function(){e(function(){var e=Object(h.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("api/usuarios/login/renew");case 2:return n=e.sent,e.next=5,n.json();case 5:(a=e.sent).message&&t(pe()),a.token?(localStorage.setItem("token",a.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(be({uid:a.payload.usuarioID,email:a.payload.email,role:a.payload.role}))):t(pe());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),t.checking?Object(N.jsx)("h1",{children:"Loading..."}):Object(N.jsx)(s.a,{children:Object(N.jsxs)(o.d,{children:[Object(N.jsx)(Xe,{exact:!0,isAuthenticated:!!t.uid,path:"/login",component:Me}),Object(N.jsx)(Xe,{exact:!0,isAuthenticated:!!t.uid,path:"/signup",component:Fe}),Object(N.jsx)(Ke,{exact:!0,path:"/",isAuthenticated:!!t.uid,component:Ge}),Object(N.jsx)(o.a,{to:"/"})]})})}var Qe=function(){return Object(N.jsx)("div",{children:Object(N.jsx)(Ve,{children:Object(N.jsx)(Ge,{})})})},Ye=n(59),Ze=n(94),$e=n.n(Ze),et=n(95),tt={checking:!0,message:null,error:null},nt=Object(Ye.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_LOGIN":return Object(C.a)(Object(C.a)(Object(C.a)({},e),t.payload),{},{checking:!1,message:null,error:null});case"AUTH_LOGOUT":return{checking:!1,message:null,error:null};case"AUTH_ERROR":return{message:t.payload};case"SIGN_MESSAGE":return{message:t.payload,error:null};case"SIGN_ERROR":return{error:t.payload,message:null};case"CHECKING_FINISH":return Object(C.a)(Object(C.a)({},e),{},{checking:!1});default:return e}}}),at=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ye.c,rt=Object(Ye.d)(nt,at(Object(Ye.a)($e.a,et.a)));i.a.render(Object(N.jsx)(m.a,{store:rt,children:Object(N.jsx)(Qe,{})}),document.getElementById("root"))}},[[124,1,2]]]);
//# sourceMappingURL=main.6c6f23a3.chunk.js.map