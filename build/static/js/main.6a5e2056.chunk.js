(this["webpackJsonpfrontend-portalempleo"]=this["webpackJsonpfrontend-portalempleo"]||[]).push([[0],{125:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),i=n.n(c),s=n(26),o=n(13),l=n(14),j=n(171),u=n(45),b=n(197),d=n(196),O=n(176),m=n(198),p=n(12),x=n(22),h=n.n(x),f=n(36),g="https://nodeproyectofinal.herokuapp.com",v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(g,"/").concat(e);return"GET"===n?fetch(a):fetch(a,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(g,"/").concat(e),r=localStorage.getItem("token")||"";return"GET"===n?fetch(a,{method:n,headers:{Authorization:r}}):fetch(a,{method:n,headers:{"Content-type":"application/json",Authorization:r},body:JSON.stringify(t)})},C=function(e,t,n,a,r,c){return function(){var t=Object(f.a)(h.a.mark((function t(i){var s,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e,{categorie_name:n,job_title:a,description:r,experience_level:c},"POST");case 2:return s=t.sent,t.next=5,s.json();case 5:if((o=t.sent).error&&console.log(o.error),"MongoError"!==o.name){t.next=10;break}return i(_(o)),t.abrupt("return");case 10:i(_(!0));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(f.a)(h.a.mark((function t(n){var a,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e,{},"DELETE");case 2:return a=t.sent,t.next=5,a.json();case 5:(r=t.sent).error&&console.log(r.error),console.log(r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=function(e){return{type:"POST_ERROR",payload:e}},N=n(44),w=n(20),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(l.a)(t,2),r=n[0],c=n[1],i=function(){c(e)},s=function(e){var t=e.target;c(Object(w.a)(Object(w.a)({},r),{},Object(N.a)({},t.name,t.value)))};return[r,s,i]},k=n(2),L=Object(j.a)({fieldSize:{width:250}});var I=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],r=t[1],c=L();Object(a.useEffect)((function(){v("api/categorias").then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]);var i=E({Category:"Back-End",ExperienceLabel:"Senior,"}),s=Object(l.a)(i,2),o=s[0],j=s[1],x=Object(p.b)(),h=Object(p.c)((function(e){return e.auth})),f=Object(p.c)((function(e){return e.post})),g="api/addpost/".concat(h.uid);return Object(k.jsxs)("div",{children:[Object(k.jsx)(u.a,{align:"center",gutterBottom:!0,variant:"h2",color:"initial",children:"Crear Oferta Laboral"}),Object(k.jsx)(b.a,{display:"flex",justifyContent:"center",textAlign:"center",className:"animate__animated animate__fadeIn animate__faster",children:Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),x(C(g,h.uid,o.Category,o.jobTitleLabel,o.descriptionLabel,o.ExperienceLabel))},children:[Object(k.jsx)(d.a,{autoComplete:"off",className:c.fieldSize,margin:"normal",id:"outlined-basic",label:"T\xedtulo de Oferta",variant:"outlined",name:"jobTitleLabel",onChange:j,required:!0}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),null!==n?Object(k.jsx)(d.a,{className:c.fieldSize,id:"outlined-select-currency-native",select:!0,label:"Categor\xeda",onChange:j,name:"Category",SelectProps:{native:!0},variant:"outlined",required:!0,children:n.items.map((function(e){return Object(k.jsx)("option",{value:e.categorie_name,children:e.categorie_name},e.categorie_name)}))}):null,Object(k.jsx)("br",{}),Object(k.jsx)(d.a,{autoComplete:"off",className:c.fieldSize,margin:"normal",id:"outlined-multiline-static",label:"Descripci\xf3n de la Oferta",variant:"outlined",name:"descriptionLabel",onChange:j,required:!0,multiline:!0,rows:5}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)(d.a,{className:c.fieldSize,id:"outlined-select-currency-native",select:!0,label:"Experiencia",name:"ExperienceLabel",onChange:j,SelectProps:{native:!0},variant:"outlined",required:!0,children:[{value:"Senior",label:"Senior"},{value:"Semi-Senior",label:"Semi-Senior"},{value:"Junior",label:"Junior"}].map((function(e){return Object(k.jsx)("option",{value:e.value,children:e.label},e.value)}))}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),!0===f.estado?Object(k.jsx)(m.a,{severity:"success",children:"Creado !"}):null,null!==f.estado&&!0!==f.estado?Object(k.jsx)(m.a,{severity:"error",children:"Error, datos ya existentes !"}):null,Object(k.jsx)("br",{}),Object(k.jsx)(O.a,{type:"submit",variant:"contained",color:"secondary",children:"crear post"})]})})]})},T=Object(j.a)({fieldSize:{width:250}});var P=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],r=t[1],c=T();Object(a.useEffect)((function(){v("api/categorias").then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]);var i=E({Category:"Back-End",ExperienceLabel:"Senior,"}),s=Object(l.a)(i,2),o=s[0],j=s[1],x=Object(p.b)(),h=Object(p.c)((function(e){return e.auth})),f=Object(p.c)((function(e){return e.post})),g="api/addrequest/".concat(h.uid);return Object(k.jsxs)("div",{children:[Object(k.jsx)(u.a,{align:"center",gutterBottom:!0,variant:"h2",color:"initial",children:"Crear Solicitud Laboral"}),Object(k.jsx)(b.a,{display:"flex",justifyContent:"center",textAlign:"center",className:"animate__animated animate__fadeIn animate__faster",children:Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),x(C(g,h.uid,o.Category,o.jobTitleLabel,o.descriptionLabel,o.ExperienceLabel))},children:[Object(k.jsx)(d.a,{autoComplete:"off",className:c.fieldSize,margin:"normal",id:"outlined-basic",label:"T\xedtulo de Solicitud",variant:"outlined",name:"jobTitleLabel",onChange:j,required:!0}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),null!==n?Object(k.jsx)(d.a,{className:c.fieldSize,id:"outlined-select-currency-native",select:!0,label:"Categor\xeda",onChange:j,name:"Category",SelectProps:{native:!0},variant:"outlined",required:!0,children:n.items.map((function(e){return Object(k.jsx)("option",{value:e.categorie_name,children:e.categorie_name},e.categorie_name)}))}):null,Object(k.jsx)("br",{}),Object(k.jsx)(d.a,{autoComplete:"off",className:c.fieldSize,margin:"normal",id:"outlined-multiline-static",label:"Descripci\xf3n de la Solicitud",variant:"outlined",name:"descriptionLabel",onChange:j,required:!0,multiline:!0,rows:5}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)(d.a,{className:c.fieldSize,id:"outlined-select-currency-native",select:!0,label:"Experiencia",name:"ExperienceLabel",onChange:j,SelectProps:{native:!0},variant:"outlined",required:!0,children:[{value:"Senior",label:"Senior"},{value:"Semi-Senior",label:"Semi-Senior"},{value:"Junior",label:"Junior"}].map((function(e){return Object(k.jsx)("option",{value:e.value,children:e.label},e.value)}))}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),!0===f.estado?Object(k.jsx)(m.a,{severity:"success",children:"Creado !"}):null,null!==f.estado&&!0!==f.estado?Object(k.jsx)(m.a,{severity:"error",children:"Error, datos ya existentes !"}):null,Object(k.jsx)("br",{}),Object(k.jsx)(O.a,{type:"submit",variant:"contained",color:"secondary",children:"crear solicitud"})]})})]})},R=n(6),q=n(180),A=n(182),D=n(177),G=n(179),U=n(181),z=n(178),B=n(98),M=Object(R.a)((function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},body:{fontSize:14}}}))(D.a),H=Object(R.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(z.a),J=Object(j.a)({table:{minWidth:700}});function F(e){var t=e.data,n=J();return Object(k.jsx)(G.a,{component:B.a,children:Object(k.jsxs)(q.a,{className:n.table,"aria-label":"customized table",children:[Object(k.jsx)(U.a,{children:Object(k.jsxs)(z.a,{children:[Object(k.jsx)(M,{children:"Nombre"}),Object(k.jsx)(M,{align:"right",children:"Apellido"}),Object(k.jsx)(M,{align:"right",children:"Email"}),Object(k.jsx)(M,{align:"right",children:"Rol"})]})}),Object(k.jsx)(A.a,{children:t.Users.map((function(e,t){return Object(k.jsxs)(H,{children:[Object(k.jsx)(M,{component:"th",scope:"row",children:e.first_name}),Object(k.jsx)(M,{align:"right",children:e.last_name}),Object(k.jsx)(M,{align:"right",children:e.email}),Object(k.jsx)(M,{align:"right",children:e.role})]},t)}))})]})})}var W=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){y("api/usuarios").then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]),Object(k.jsxs)("div",{children:[Object(k.jsx)(u.a,{align:"center",gutterBottom:!0,variant:"h2",color:"initial",children:"Lista de Usuarios"}),null!==n?Object(k.jsx)(b.a,{children:Object(k.jsx)(F,{data:n})}):Object(k.jsx)("h2",{children:"Loading..."})]})},K=n(187),X=n(175),V=n(92),Q=n.n(V),Y=n(188),Z=n(186),$=n(200),ee=n(202),te=n(201),ne=n(183),ae=n(127),re=n(184),ce=n(185),ie=n(174),se=n(71),oe=n.n(se),le=n(90),je=n.n(le),ue=n(91),be=n.n(ue),de=Object(j.a)((function(e){return{toolbar:e.mixins.toolbar,drawerPaper:{width:240}}})),Oe=function(){var e=de(),t=Object(p.c)((function(e){return e.auth}));return Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{className:e.toolbar}),Object(k.jsx)(ne.a,{}),Object(k.jsxs)(ie.a,{children:[Object(k.jsxs)(ae.a,{button:!0,component:s.b,to:"/posts",children:[Object(k.jsx)(re.a,{children:Object(k.jsx)(oe.a,{})}),Object(k.jsx)(ce.a,{primary:"Lista de Ofertas"})]},"PostLists"),Object(k.jsxs)(ae.a,{button:!0,component:s.b,to:"/requests",children:[Object(k.jsx)(re.a,{children:Object(k.jsx)(je.a,{})}),Object(k.jsx)(ce.a,{primary:"Solicitudes"})]},"RequestsLists")]}),Object(k.jsx)(ne.a,{}),Object(k.jsxs)(ie.a,{children:[Object(k.jsxs)(ae.a,{button:!0,component:s.b,to:"/createpost",children:[Object(k.jsx)(re.a,{children:Object(k.jsx)(oe.a,{})}),Object(k.jsx)(ce.a,{primary:"Crear Oferta"})]},"CreatePost"),Object(k.jsxs)(ae.a,{button:!0,component:s.b,to:"/createrequest",children:[Object(k.jsx)(re.a,{children:Object(k.jsx)(oe.a,{})}),Object(k.jsx)(ce.a,{primary:"Crear Solicitud"})]},"CreateRequest")]}),Object(k.jsx)(ne.a,{}),"ADMIN_ROLE"===t.role?Object(k.jsx)(ie.a,{children:Object(k.jsxs)(ae.a,{button:!0,component:s.b,to:"/getusers",children:[Object(k.jsx)(re.a,{children:Object(k.jsx)(be.a,{})}),Object(k.jsx)(ce.a,{primary:"Lista de Usuarios"})]},"GetUsers")}):null]})},me=function(e){return{type:"AUTH_LOGIN",payload:e}},pe=function(){return{type:"AUTH_LOGOUT"}},xe=function(e){return{type:"AUTH_ERROR",payload:e}},he=function(e){return{type:"SIGN_MESSAGE",payload:e}},fe=function(e){return{type:"SIGN_ERROR",payload:e}},ge=function(){return{type:"CHECKING_FINISH"}},ve=240,ye=Object(j.a)((function(e){return{root:{display:"flex"},menuButton:Object(N.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),title:{flexGrow:1},drawer:Object(N.a)({},e.breakpoints.up("sm"),{width:ve,flexShrink:0}),drawerPaper:{width:ve},appBar:Object(N.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(ve,"px)"),marginLeft:ve}),toolbar:e.mixins.toolbar,content:{flexGrow:1,padding:e.spacing(3)}}})),Ce=function(e){var t=ye(),n=Object(a.useState)(!1),r=Object(l.a)(n,2),c=r[0],i=r[1],s=Object(p.b)(),o=function(){i(!c)},j=Object(p.c)((function(e){return e.auth}));return Object(k.jsxs)("div",{className:t.root,children:[Object(k.jsx)(Z.a,{}),Object(k.jsx)(K.a,{position:"fixed",color:"primary",className:t.appBar,children:Object(k.jsxs)(Y.a,{children:[Object(k.jsx)(X.a,{edge:"start",color:"inherit","aria-label":"menu",onClick:o,className:t.menuButton,children:Object(k.jsx)(Q.a,{})}),Object(k.jsx)($.a,{smDown:!0,children:Object(k.jsx)(u.a,{className:t.title,variant:"h6",children:"Portal de Empleos"})}),Object(k.jsx)($.a,{xsDown:!0,children:Object(k.jsx)(u.a,{className:t.title,variant:"h6",children:null!==j.email?j.email:null})}),Object(k.jsx)($.a,{smUp:!0,children:Object(k.jsx)(u.a,{className:t.title,variant:"h6",children:null!==j.email?j.email.split("@")[0]:null})}),Object(k.jsx)($.a,{xsDown:!0,children:Object(k.jsx)(ee.a,{label:"ADMIN_ROLE"===j.role?"Admin":"User",color:"secondary",size:"small"})}),Object(k.jsx)(O.a,{color:"inherit",onClick:function(){s((function(e){localStorage.clear(),e(pe())}))},children:"Logout"})]})}),Object(k.jsxs)("nav",{className:t.drawer,children:[Object(k.jsx)("div",{className:t.toolbar}),Object(k.jsx)($.a,{smUp:!0,implementation:"css",children:Object(k.jsx)(te.a,{variant:"temporary",anchor:"left",open:c,onClose:o,classes:{paper:t.drawerPaper},ModalProps:{keepMounted:!0},children:Object(k.jsx)(Oe,{})})}),Object(k.jsx)($.a,{xsDown:!0,implementation:"css",children:Object(k.jsx)(te.a,{classes:{paper:t.drawerPaper},variant:"permanent",open:!0,children:Object(k.jsx)(Oe,{})})})]}),Object(k.jsxs)("main",{className:t.content,children:[Object(k.jsx)("div",{className:t.toolbar}),e.children]})]})},Se=n(189),_e=n(190),Ne=n(192),we=n(203),Ee=n(70),ke=n(69),Le=n(93),Ie=n.n(Le),Te=n(193),Pe=n(194),Re=n(96),qe=n(191),Ae=Object(j.a)((function(e){return{root:{maxWidth:345},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:Ee.a[500]},pink:{color:e.palette.getContrastText(ke.a[500]),backgroundColor:ke.a[500]}}}));function De(e){var t=e.description,n=e.createdAt,a=e.jobTitle,c=e.firstName,i=e.lastName,s=e.email,o=e.requirements,j=e.type,b=e.id,d=e.setborrarRefresh,m=Object(p.c)((function(e){return e.auth})),x=Ae(),g=r.a.useState(!1),v=Object(l.a)(g,2),y=v[0],C=v[1],_=r.a.useState(null),N=Object(l.a)(_,2),w=N[0],E=N[1],L=Object(p.b)(),I="post"===j?"api/removepost/".concat(b):"api/removerequest/".concat(b),T=function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(S(I));case 2:E(null),d(b);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(Se.a,{className:x.root,children:[Object(k.jsx)(_e.a,{avatar:Object(k.jsx)(we.a,{"aria-label":"recipe",className:x.avatar,children:c[0]}),action:"ADMIN_ROLE"===m.role||m.email===s?Object(k.jsxs)("div",{children:[Object(k.jsx)(X.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){E(e.currentTarget)},children:Object(k.jsx)(Ie.a,{})}),Object(k.jsx)(Re.a,{id:"simple-menu",anchorEl:w,keepMounted:!0,open:Boolean(w),onClose:function(){E(null)},children:Object(k.jsx)(qe.a,{onClick:T,children:"Borrar Post"})})]}):null,title:a,subheader:n}),Object(k.jsxs)(Ne.a,{children:[Object(k.jsx)(u.a,{variant:"body1",color:"textPrimary",component:"p",children:t}),Object(k.jsx)("br",{}),Object(k.jsx)(u.a,{variant:"body1",color:"textPrimary",component:"p",children:o})]}),Object(k.jsx)(Te.a,{disableSpacing:!0,children:Object(k.jsx)(O.a,{variant:"contained",color:"secondary",onClick:function(){C(!y)},"aria-expanded":y,children:"M\xe1s Info"})}),Object(k.jsxs)(Pe.a,{in:y,timeout:"auto",unmountOnExit:!0,children:[Object(k.jsx)(ne.a,{}),Object(k.jsxs)(Ne.a,{children:[Object(k.jsx)(u.a,{paragraph:!0,children:"Creado por: ".concat(c," ").concat(i)}),Object(k.jsx)(u.a,{paragraph:!0,children:"Email: ".concat(s)})]})]})]})}var Ge=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(),i=Object(l.a)(c,2),s=i[0],o=i[1];return Object(a.useEffect)((function(){y("api/posts/").then((function(e){return e.json()})).then((function(e){return r(e)}))}),[s]),Object(k.jsxs)("div",{children:[Object(k.jsx)(u.a,{align:"center",gutterBottom:!0,variant:"h2",color:"initial",children:"Lista de Ofertas"}),Object(k.jsx)(b.a,{display:"flex",justifyContent:"center",flexWrap:"wrap",children:null!==n?n.items.reverse().map((function(e,t){return Object(k.jsx)(b.a,{m:3,className:"animate__animated animate__fadeIn animate__faster",children:Object(k.jsx)(De,{setborrarRefresh:o,type:"post",id:e._id,description:e.description,createdAt:e.created_at.split("T")[0],jobTitle:e.job_title,firstName:e.user.first_name,lastName:e.user.last_name,email:e.user.email,requirements:e.requirements.join(", ")})},t)})):Object(k.jsx)("h3",{children:"Loading..."})})]})},Ue=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(),i=Object(l.a)(c,2),s=i[0],o=i[1];return Object(a.useEffect)((function(){y("api/requests").then((function(e){return e.json()})).then((function(e){return r(e)}))}),[s]),Object(k.jsxs)("div",{children:[Object(k.jsx)(u.a,{align:"center",gutterBottom:!0,variant:"h2",color:"initial",children:"Solicitudes de Trabajo"}),Object(k.jsx)(b.a,{display:"flex",justifyContent:"center",flexWrap:"wrap",children:null!==n?n.items.reverse().map((function(e,t){return Object(k.jsx)(b.a,{m:3,className:"animate__animated animate__fadeIn animate__faster",children:Object(k.jsx)(De,{setborrarRefresh:o,id:e._id,type:"request",description:e.description,createdAt:e.created_at.split("T")[0],jobTitle:e.job_title,firstName:e.user.first_name,lastName:e.user.last_name,email:e.user.email})},t)})):Object(k.jsx)("h3",{children:"Loading..."})})]})},ze=function(){return Object(k.jsx)(s.a,{children:Object(k.jsx)(Ce,{children:Object(k.jsxs)(o.d,{children:[Object(k.jsx)(o.b,{exact:!0,path:"/posts",children:Object(k.jsx)(Ge,{})}),Object(k.jsx)(o.b,{exact:!0,path:"/requests",children:Object(k.jsx)(Ue,{})}),Object(k.jsx)(o.b,{exact:!0,path:"/createpost",children:Object(k.jsx)(I,{})}),Object(k.jsx)(o.b,{exact:!0,path:"/createrequest",children:Object(k.jsx)(P,{})}),Object(k.jsx)(o.b,{exact:!0,path:"/getusers",children:Object(k.jsx)(W,{})}),Object(k.jsx)(o.a,{to:"/posts"})]})})})},Be=function(){return Object(k.jsx)("div",{children:Object(k.jsx)(ze,{})})},Me=n(195),He=n.p+"static/media/login_image.f50df7af.svg",Je=Object(j.a)({PaperClass:{width:300,height:550,display:"flex"},iconClass:{padding:15,width:180},formClass:{display:"flex",flexDirection:"column",alignItems:"center"}}),Fe=function(){var e=E(),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Je(),i=Object(p.b)(),s=Object(p.c)((function(e){return e.auth})),j=Object(o.g)();return Object(a.useEffect)((function(){}),[s]),Object(k.jsx)(b.a,{p:0,className:c.boxContainerClass,bgcolor:"primary.main",style:{height:"100vh"},justifyContent:"center",alignItems:"center",display:"flex",children:Object(k.jsx)(B.a,{elevation:3,className:c.PaperClass,children:Object(k.jsxs)(Me.a,{container:!0,direction:"column",justify:"space-evenly",alignItems:"center",children:[Object(k.jsxs)(b.a,{justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"column",children:[Object(k.jsx)("img",{className:c.iconClass,src:He,alt:"login screen"}),Object(k.jsx)(O.a,{variant:"contained",color:"primary",onClick:function(){j.push("/signup")},children:"Crear una cuenta"})]}),Object(k.jsx)(ne.a,{}),Object(k.jsxs)(b.a,{justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"column",children:[Object(k.jsx)(u.a,{variant:"h5",children:"Login"}),Object(k.jsxs)("form",{className:c.formClass,onSubmit:function(e){var t,a;e.preventDefault(),console.log(n),i((t=n.lEmail,a=n.lPassword,function(){var e=Object(f.a)(h.a.mark((function e(n){var r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("api/usuarios/login",{email:t,password:a},"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:(c=e.sent).message&&n(xe(c.message)),c.token&&(localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),n(me({uid:c.usuario.usuarioID,email:c.usuario.email,role:c.usuario.role})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(k.jsx)(d.a,{autoComplete:"off",margin:"normal",id:"login-email",label:"Email",type:"Email",variant:"outlined",name:"lEmail",onChange:r,required:!0}),Object(k.jsx)(d.a,{type:"password",autoComplete:"off",margin:"normal",id:"standard-password-input",label:"Password",variant:"outlined",name:"lPassword",onChange:r,required:!0}),Object(k.jsx)("br",{}),null!==s.message?Object(k.jsx)(m.a,{severity:"error",children:s.message}):null,Object(k.jsx)("br",{}),Object(k.jsxs)(b.a,{display:"flex",alignItems:"center",children:[Object(k.jsx)(b.a,{children:Object(k.jsx)(O.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})}),Object(k.jsx)(b.a,{m:1,children:Object(k.jsx)(O.a,{type:"submit",variant:"contained",color:"secondary",children:"Demo Login"})})]})]})]})]})})})},We=Object(j.a)({paperContainer_signup:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:300,height:650},formClass:{display:"flex",flexDirection:"column",alignItems:"center"}}),Ke=function(){var e=E(),t=Object(l.a)(e,2),n=t[0],a=t[1],r=Object(p.b)(),c=Object(p.c)((function(e){return e.auth})),i=We(),s=Object(o.g)();return Object(k.jsx)(b.a,{style:{height:"100vh"},bgcolor:"primary.main",justifyContent:"center",alignItems:"center",display:"flex",children:Object(k.jsxs)(B.a,{className:i.paperContainer_signup,children:[Object(k.jsx)(O.a,{variant:"contained",color:"secondary",onClick:function(){r(pe()),s.push("/login")},children:"Go back"}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)(u.a,{id:"transition-modal-title",variant:"h5",children:"Sign up"}),Object(k.jsxs)("form",{className:i.formClass,onSubmit:function(e){var t,a,c,i;e.preventDefault(),r((t=n.sFirstName,a=n.sLastName,c=n.sEmail,i=n.sPassword,function(){var e=Object(f.a)(h.a.mark((function e(n){var r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("api/usuarios/signup",{email:c,password:i,last_name:a,first_name:t},"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(s=e.sent).errors){e.next=9;break}return n(fe(s.errors)),e.abrupt("return");case 9:n(he(s));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(k.jsx)(d.a,{autoComplete:"off",margin:"normal",id:"sign-firstname",label:"First Name",variant:"outlined",name:"sFirstName",onChange:a,required:!0}),Object(k.jsx)(d.a,{autoComplete:"off",margin:"normal",id:"sign-lastname",label:"Last Name",variant:"outlined",name:"sLastName",onChange:a,required:!0}),Object(k.jsx)(d.a,{autoComplete:"off",margin:"normal",id:"sign-email",label:"Email",variant:"outlined",name:"sEmail",onChange:a,type:"Email",required:!0}),Object(k.jsx)(d.a,{type:"password",autoComplete:"off",margin:"normal",id:"standard-password-input",label:"Password",variant:"outlined",name:"sPassword",onChange:a,required:!0}),Object(k.jsx)("br",{}),null!==c.error?c.error.map((function(e,t){return Object(k.jsx)(m.a,{severity:"error",children:e.msg},t)})):null,null!==c.message&&"Usuario o password incorrecto"!==c.message?Object(k.jsx)(m.a,{severity:"success",children:"Cuenta Creada!"}):null,Object(k.jsx)("br",{}),Object(k.jsx)(O.a,{type:"submit",variant:"contained",color:"primary",children:"Crear cuenta"})]})]})})},Xe=n(68),Ve=function(e){var t=e.isAuthenticated,n=e.component,a=Object(Xe.a)(e,["isAuthenticated","component"]);return Object(k.jsx)(o.b,Object(w.a)(Object(w.a)({},a),{},{component:function(e){return t?Object(k.jsx)(n,Object(w.a)({},e)):Object(k.jsx)(o.a,{to:"/login"})}}))},Qe=function(e){var t=e.isAuthenticated,n=e.component,a=Object(Xe.a)(e,["isAuthenticated","component"]);return Object(k.jsx)(o.b,Object(w.a)(Object(w.a)({},a),{},{component:function(e){return t?Object(k.jsx)(o.a,{to:"/"}):Object(k.jsx)(n,Object(w.a)({},e))}}))};function Ye(){var e=Object(p.b)(),t=Object(p.c)((function(e){return e.auth}));return Object(a.useEffect)((function(){e(function(){var e=Object(f.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("api/usuarios/login/renew");case 2:return n=e.sent,e.next=5,n.json();case 5:(a=e.sent).message&&t(ge()),a.token?(localStorage.setItem("token",a.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(me({uid:a.payload.usuarioID,email:a.payload.email,role:a.payload.role}))):t(ge());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),t.checking?Object(k.jsx)("h1",{children:"Loading..."}):Object(k.jsx)(s.a,{children:Object(k.jsxs)(o.d,{children:[Object(k.jsx)(Qe,{exact:!0,isAuthenticated:!!t.uid,path:"/login",component:Fe}),Object(k.jsx)(Qe,{exact:!0,isAuthenticated:!!t.uid,path:"/signup",component:Ke}),Object(k.jsx)(Ve,{exact:!0,path:"/",isAuthenticated:!!t.uid,component:Be}),Object(k.jsx)(o.a,{to:"/"})]})})}var Ze=function(){return Object(k.jsx)("div",{children:Object(k.jsx)(Ye,{children:Object(k.jsx)(Be,{})})})},$e=n(59),et=n(94),tt=n.n(et),nt=n(95),at={checking:!0,message:null,error:null},rt={estado:null},ct=Object($e.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_LOGIN":return Object(w.a)(Object(w.a)(Object(w.a)({},e),t.payload),{},{checking:!1,message:null,error:null});case"AUTH_LOGOUT":return{checking:!1,message:null,error:null};case"AUTH_ERROR":case"SIGN_MESSAGE":return{message:t.payload,error:null};case"SIGN_ERROR":return{error:t.payload,message:null};case"CHECKING_FINISH":return Object(w.a)(Object(w.a)({},e),{},{checking:!1});default:return e}},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POST_ERROR":return{estado:t.payload};default:return e}}}),it=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||$e.c,st=Object($e.d)(ct,it(Object($e.a)(tt.a,nt.a)));i.a.render(Object(k.jsx)(p.a,{store:st,children:Object(k.jsx)(Ze,{})}),document.getElementById("root"))}},[[125,1,2]]]);
//# sourceMappingURL=main.6a5e2056.chunk.js.map